function awwlm_init_wishlist_popup(){if(jQuery(".awwlm-add-to-wishlist-wrap").length&&!jQuery("#awwlm-popup-message").length){var a=jQuery("<div>").attr("id","awwlm-message"),t=jQuery("<div>").attr("id","awwlm-popup-message").html(a).hide();jQuery("body").prepend(t)}}function awwlm_show_popup(a){var t=jQuery("#awwlm-popup-message"),e=jQuery("#awwlm-message");e.html(a),t.css("margin-left","-"+jQuery(t).width()+"px").fadeIn(),window.setTimeout((function(){t.fadeOut(),e.html("")}),3e3)}function check_cookie_enabled(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var a=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",a}awwlm_init_wishlist_popup(),jQuery(".awwlm_popup_login").magnificPopup({items:{src:AWWLMSettings.strings.login_msg,type:"inline"}}),jQuery(document).on("click",".awwlm_add_to_wishlist",(function(a){a.preventDefault();var t=jQuery(this).attr("data-product-id"),e=jQuery(this).attr("data-original-product-id"),r=".awwlm_add_to_wishlist_"+e,o=jQuery(this),i=o.parents(".awwlm-add-to-wishlist-wrap").siblings("form.cart[method=post]").serialize();data={action:"awwlm_add_to_wishlist",productID:t,productOriginal:e,wishlistID:"default",frmData:i},check_cookie_enabled()?jQuery.ajax({url:AWWLMSettings.ajaxurl,type:"POST",data:data,dataType:"json",beforeSend:function(){o.addClass("awwlm_loading")},success:function(a){o.removeClass("awwlm_loading"),""!=a.after_added_link&&1==a.success&&jQuery(r).html("").html(JSON.parse(a.after_added_link)),a.success_popup&&awwlm_show_popup(a.message),1==a.success&&"yes"==a.success_redirect&&(url=a.wishlist_url,window.location.href=url),1==a.success&&jQuery(r).attr("data-exists",a.wishlist_id)}}):window.alert("We are sorry, this feature works only if cookies on your browser are enabled.")})),jQuery(document).on("click",".awwlm_remove_wishlist",(function(a){a.preventDefault();var t=jQuery(this).attr("data-product-id"),e=jQuery(this).attr("data-original-product-id"),r=".awwlm_add_to_wishlist_"+e,o=jQuery(this).parent(".awwlm-add-button").parent(r).attr("data-exists"),i=jQuery(this);data={action:"awwlm_remove_wishlist",productID:t,productOriginal:e,wishlistID:o},jQuery.ajax({url:AWWLMSettings.ajaxurl,type:"POST",data:data,beforeSend:function(){i.addClass("awwlm_loading")},success:function(a){i.removeClass("awwlm_loading"),1==a.success&&(""!=a.after_remove_link&&jQuery(r).html("").html(JSON.parse(a.after_remove_link)),a.success_popup&&awwlm_show_popup(a.message),jQuery(r).attr("data-exists",0))}})}));var currentRequest=null;function awwlm_variation_check(){jQuery(".variations_form").on("woocommerce_variation_select_change",(function(){var a=jQuery(this).attr("data-product_id");jQuery(".awwlm_add_to_wishlist_"+a).find(".awwlm_add_to_wishlist ").attr("data-product-id",a),awwlm_check_variation(a,a,jQuery(".awwlm_add_to_wishlist_"+a).attr("data-exists"))})),jQuery(".single_variation_wrap").on("show_variation",(function(a,t){var e=jQuery(this).parent(".variations_form").attr("data-product_id"),r=t.variation_id,o=jQuery(".awwlm_add_to_wishlist_"+e).attr("data-exists");jQuery(".awwlm_add_to_wishlist_"+e).find(".awwlm_add_to_wishlist ").attr("data-product-id",r),jQuery(".awwlm_add_to_wishlist_"+e).find(".awwlm_add_to_wishlist ").addClass("awwlm_loading"),awwlm_check_variation(e,r,o)}))}function awwlm_check_variation(a,t,e){var r=".awwlm_add_to_wishlist_"+a;data={action:"awwlm_variation_wishlist",productID:t,productOriginal:a,wishlistID:e},dat=jQuery(".awwlm_add_to_wishlist_"+a).find(".awwlm_add_to_wishlist "),currentRequest=jQuery.ajax({url:AWWLMSettings.ajaxurl,type:"POST",data:data,dataType:"json",beforeSend:function(){null!=currentRequest&&currentRequest.abort(),dat.addClass("awwlm_loading")},success:function(a){dat.removeClass("awwlm_loading"),""!=a.after_added_link&&jQuery(r).html("").html(JSON.parse(a.after_added_link)),jQuery(r).attr("data-exists",a.wishlist_id)}})}awwlm_variation_check();var $supports_html5_storage=!0,hash_key=AWWLMSettings.hash_key;try{$supports_html5_storage="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("ti","test"),window.sessionStorage.removeItem("ti"),window.localStorage.setItem("ti","test"),window.localStorage.removeItem("ti")}catch(a){$supports_html5_storage=!1}function awwlm_get_wishlist_data(){if($supports_html5_storage&&localStorage.getItem(hash_key)){var a=jQuery.parseJSON(localStorage.getItem(hash_key));console.log(a)}}awwlm_get_wishlist_data(),cart_redirect_after_add="undefined"!=typeof wc_add_to_cart_params&&null!==wc_add_to_cart_params?wc_add_to_cart_params.cart_redirect_after_add:"",jQuery(document.body).on("adding_to_cart",(function(a,t,e){void 0!==t&&void 0!==e&&t.closest(".awwlm-table-collection").length&&(e.remove_from_wishlist_after_add_to_cart=t.closest("[data-row-id]").data("row-id"),e.wishlist_id=t.closest(".awwlm-table-collection").data("id"),"undefined"!=typeof wc_add_to_cart_params&&(wc_add_to_cart_params.cart_redirect_after_add=AWWLMSettings.redirect_to_cart),"undefined"!=typeof awwlm_general&&(awwlm_general.cart_redirect=isTrue(AWWLMSettings.redirect_to_cart)))})),jQuery(document).on("added_to_cart",(function(a,t,e,r){if(void 0!==r&&r.closest(".awwlm-table-collection").length){"undefined"!=typeof wc_add_to_cart_params&&(wc_add_to_cart_params.cart_redirect_after_add=cart_redirect_after_add),"undefined"!=typeof awwlm_general&&(awwlm_general.cart_redirect=isTrue(cart_redirect_after_add));var o=r.closest("[data-row-id]");r.removeClass("added"),o.find(".added_to_cart").remove(),AWWLMSettings.remove_from_wishlist_after_add_to_cart&&o.remove()}})),jQuery(document.body).on("added_to_cart",(function(a,t,e,r){var o=jQuery(".woocommerce-message");0===o.length?jQuery(".awwlm-container-wishlistlisting").prepend(AWWLMSettings.strings.added_to_cart_message):o.fadeOut(300,(function(){jQuery(this).replaceWith(AWWLMSettings.strings.added_to_cart_message).fadeIn()}))})),jQuery(document).on("click",".awwlm-remove",(function(a){var t=jQuery(this),e=t.closest("[data-row-id]").data("row-id"),r=t.closest(".awwlm-table-collection").data("id"),o=t.closest("[data-row-id]");data={action:"awwlm_remove_added_wishlist_page",product:e,wishlist:r},jQuery.ajax({url:AWWLMSettings.ajaxurl,type:"POST",dataType:"json",data:data,beforeSend:function(){t.addClass("awwlm_loading")},success:function(a){t.removeClass("awwlm_loading"),o.remove(),""!=a.message&&jQuery(".awwlm-wishlist-message").html(a.message)}})})),jQuery(document).on("click",".copy-target",(function(a){a.preventDefault();var t=jQuery("<input>");jQuery("body").append(t),t.val(jQuery(this).attr("href")).select(),document.execCommand("copy"),t.remove()})),jQuery(document).on("acoqvw_quickview_loaded",awwlm_variation_check),jQuery(document.body).on("quick_view_pro:open_complete",awwlm_variation_check),jQuery(document).on("click",".awwlm-save-later-btn .button1.add",(function(a){a.preventDefault();var t=jQuery(this),e=t.data("id"),r=t.data("key");jQuery(".shop_table.cart, .updating, .cart_totals").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:.6}}),data={product_id:e,cart_key:r,action:"awwlm_action_add_to_savelist"},jQuery.ajax({url:AWWLMSettings.ajaxurl,type:"POST",data:data,dataType:"json",beforeSend:function(){jQuery(".woocommerce-message").fadeOut("fast"),t.addClass("loading")},success:function(a){t.removeClass("loading"),jQuery(".shop_table.cart, .updating, .cart_totals").unblock(),0==jQuery("#awwlm-savelater-wrap").length&&window.location.replace(AWWLMSettings.carturl),jQuery("#awwlm-savelater-wrap").html("").html(JSON.parse(a.save_list)),setTimeout((function(){jQuery("[name='update_cart']").removeAttr("disabled").trigger("click")}),300)}})})),jQuery(document).on("click",".awwlm-save-later-btn .button2.remove",(function(a){a.preventDefault();var t=jQuery(this),e=t.data("id"),r=t.data("list-id");jQuery(".shop_table.cart, .updating, .cart_totals").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:.6}}),data={product_id:e,list_id:r,action:"awwlm_action_remove_savelist"},jQuery.ajax({url:AWWLMSettings.ajaxurl,type:"POST",data:data,dataType:"json",beforeSend:function(){jQuery(".woocommerce-message").fadeOut("fast"),t.addClass("loading")},success:function(a){t.removeClass("loading"),jQuery("#awwlm-savelater-wrap").html("").html(JSON.parse(a.save_list)),jQuery(".shop_table.cart, .updating, .cart_totals").unblock(),setTimeout((function(){jQuery("[name='update_cart']").removeAttr("disabled").trigger("click")}),300)}})})),jQuery(document).on("click",".awwlm-button.awwlm-add-to-cart",(function(a){a.preventDefault();var t=jQuery(this),e=t.data("id"),r=t.data("list-id");jQuery(".shop_table.cart, .updating, .cart_totals").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:.6}}),data={product_id:e,list_id:r,action:"awwlm_action_addcart_savelist"},jQuery.ajax({url:AWWLMSettings.ajaxurl,type:"POST",data:data,dataType:"json",beforeSend:function(){jQuery(".woocommerce-message").fadeOut("fast"),t.addClass("loading")},success:function(a){t.removeClass("loading"),jQuery("#awwlm-savelater-wrap").html("").html(JSON.parse(a.save_list)),jQuery(".shop_table.cart, .updating, .cart_totals").unblock(),0!=jQuery(".cart-empty.woocommerce-info").length&&window.location.replace(AWWLMSettings.carturl),setTimeout((function(){jQuery("[name='update_cart']").removeAttr("disabled").trigger("click")}),300)}})}));